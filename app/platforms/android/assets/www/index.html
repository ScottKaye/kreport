<!DOCTYPE html>
<html ng-app="kAppM">

<head>
	<meta charset="utf-8" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="msapplication-tap-highlight" content="no" />
	<!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
	<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
	<link rel="stylesheet" type="text/css" href="css/app.css" />
	<script src="js/jquery.min.js"></script>
	<script src="js/angular.min.js"></script>
	<script src="js/kAppM.js"></script>
</head>

<body ng-controller="baseController as base" ng-cloak>
	<header>
		<h1>kReport</h1>
		<span class="bars" ng-click="base.showSettings()">&#8801;</span>
	</header>

	<main class="content">
		<!-- No server has been selected, show first runs creen -->
		<div ng-hide="base.server" ng-controller="connectController as con">
			<form class="future-form" method="get" action="#" onsubmit="return false;">
				<fieldset>
					<table>
						<tr>
							<td colspan="2">
								<p>To connect to a kReport application, please enter the base domain or IP below.</p>
							</td>
						</tr>
						<tr>
							<td>
								<label for="form-con-server">Server</label>
							</td>
							<td>
								<input required id="form-con-server" type="text" name="server" placeholder="IP or domain" maxlength="100" ng-model="con.serverAddress" ng-disabled="con.connecting" ng-change="con.result=null;con.button='Connect'">
							</td>
						</tr>
						<tr>
							<td>&nbsp;</td>
							<td>
								<button ng-click="con.connect()" ng-disabled="con.connecting" ng-class="{success: 'success', fail: 'error'}[con.result]">{{ con.button }}</button>
								<p>{{ con.message }}</p>
								<button onclick="location.reload()" ng-show="con.result=='success'">Continue</button>
							</td>
						</tr>
					</table>
				</fieldset>
			</form>
		</div>
	</main>

	<script type="text/javascript" src="cordova.js"></script>

</body>

</html>
